---
// CookieBanner.astro - Fun "no cookies" banner
---

<div id="cookie-banner" class="fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md z-50 animate-slide-up">
  <div class="bg-gradient-to-br from-navy to-navy-dark rounded-2xl shadow-2xl border border-turquoise/20 p-5 relative overflow-hidden">
    <!-- Decorative glow -->
    <div class="absolute -top-10 -right-10 w-32 h-32 bg-turquoise/20 rounded-full blur-2xl"></div>
    <div class="absolute -bottom-10 -left-10 w-24 h-24 bg-terracotta/20 rounded-full blur-2xl"></div>

    <!-- Close X button -->
    <button
      id="close-cookie-x"
      class="absolute top-3 right-3 w-7 h-7 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center text-white/60 hover:text-white transition-colors z-10"
      aria-label="Cerrar"
    >
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>

    <div class="relative flex items-center gap-4">
      <img
        src="/images/cookies.webp"
        alt="TLACU con galleta"
        class="w-24 h-24 flex-shrink-0 object-contain drop-shadow-lg"
        width="96"
        height="96"
        loading="lazy"
      />
      <div class="flex-1 min-w-0 pr-6">
        <p class="font-bold text-white text-lg mb-1">
          Este sitio <span class="text-turquoise">NO</span> usa cookies
        </p>
        <p class="text-cream/80 text-sm leading-relaxed">
          Pero TLACU te regala una galleta de todos modos.
        </p>
      </div>
    </div>

    <div class="relative mt-4 flex items-center gap-2 text-cream/50 text-xs">
      <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
      </svg>
      <span>Respetamos tu privacidad. Sin rastreo invasivo.</span>
    </div>

    <button
      id="close-cookie-banner"
      class="relative mt-3 w-full py-2.5 px-4 bg-terracotta hover:bg-terracotta-light text-white font-semibold rounded-xl transition-colors flex items-center justify-center gap-2"
    >
      <span>Gracias TLACU</span>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
      </svg>
    </button>
  </div>
</div>

<style>
  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slide-up {
    animation: slide-up 0.5s ease-out forwards;
    animation-delay: 1s;
    opacity: 0;
  }
</style>

<script is:inline>
  // Check if banner was already dismissed
  if (!sessionStorage.getItem('cookieBannerDismissed')) {
    document.getElementById('cookie-banner').style.display = 'block';
  } else {
    document.getElementById('cookie-banner').style.display = 'none';
  }

  // Close banner function
  function closeCookieBanner() {
    const banner = document.getElementById('cookie-banner');
    banner.style.opacity = '0';
    banner.style.transform = 'translateY(100%)';
    banner.style.transition = 'all 0.3s ease-out';
    setTimeout(() => {
      banner.style.display = 'none';
    }, 300);
    sessionStorage.setItem('cookieBannerDismissed', 'true');
  }

  // Close button handlers (both X and main button)
  document.getElementById('close-cookie-banner').addEventListener('click', closeCookieBanner);
  document.getElementById('close-cookie-x').addEventListener('click', closeCookieBanner);
</script>
